<?xml version="1.0"?>
<!DOCTYPE fontconfig SYSTEM "urn:fontconfig:fonts.dtd">
<fontconfig>
  <dir>~/.fonts</dir>

  <!-- system-ui fonts 使用衬体 -->
  <match target="pattern">
    <test name="family">
      <string>system-ui</string>
    </test>
    <edit name="family" mode="prepend" binding="strong">
      <string>serif</string>
    </edit>
  </match>

  <!-- Default sans-serif fonts
       无衬字体不能缺少，它是网页的备份选择 -->
  <match target="pattern">
    <test name="family">
      <string>sans-serif</string>
    </test>
    <edit name="family" mode="prepend" binding="strong">
      <string>LXGW WenKai</string>
      <string>SFMono Nerd Font Mono</string>
      <string>Apple Color Emoji</string>
    </edit>
  </match>

  <!-- serif fonts 衬体 -->
  <match target="pattern">
    <test name="family">
      <string>serif</string>
    </test>
    <edit name="family" mode="prepend" binding="strong">
      <string>LXGW WenKai</string>
      <string>SFMono Nerd Font Mono</string>
      <string>Apple Color Emoji</string>
    </edit>
  </match>

  <!-- monospace fonts 等宽字体 -->
  <match target="pattern">
    <test name="family">
      <string>monospace</string>
    </test>
    <edit name="family" mode="prepend" binding="strong">
      <string>LXGW WenKai</string>
      <string>SFMono Nerd Font Mono</string>
      <string>Apple Color Emoji</string>
    </edit>
  </match>

  <!-- 除了程序名为 chrome 的情况下，优先使用 SFMono Nerd Font Mono
       显示西文，再用 LXGW WenKai 显示中文。-->
  <match target="pattern">
    <test name="prgname" compare="not_eq">
      <string>chrome</string>
    </test>
    <test name="family" compare="contains">
      <string>LXGW WenKai</string>
    </test>
    <edit name="family" mode="prepend" binding="strong">
      <string>SFMono Nerd Font Mono</string>
    </edit>
  </match>

  <!-- en 英文环境里，将 LXGW WenKai 替换成 SFMono Nerd Font Mono
       ↑ 其实上一条规则已经实现了这条规则的目的，但出于严谨，还是把这条也写上 -->
  <match target="pattern">
    <test name="lang" compare="contains">
      <string>en</string>
    </test>
    <test name="family" compare="contains">
      <string>LXGW WenKai</string>
    </test>
    <edit name="family" mode="prepend" binding="strong">
      <string>SFMono Nerd Font Mono</string>
    </edit>
  </match>

  <!-- Replace monospace fonts
       pacman -Qqo /usr/share/fonts Arch Linux 默认预装了两个字体：
       - 无衬线英文字体：Cantarell
       - 等宽英文字体：Source Code Pro
       总之有一些地方没有使用 SF font -->
  <match target="pattern">
    <test name="family" compare="contains">
      <string>Source Code</string>
    </test>
    <edit name="family" binding="strong">
      <string>SFMono Nerd Font Mono</string>
    </edit>
  </match>
</fontconfig>
