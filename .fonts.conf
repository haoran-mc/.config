<?xml version="1.0"?>
<!DOCTYPE fontconfig SYSTEM "urn:fontconfig:fonts.dtd">
<fontconfig>
  <dir>~/.fonts</dir>

  <!-- Default system-ui fonts -->
  <match target="pattern">
    <test name="family">
      <string>system-ui</string>
    </test>
    <edit name="family" mode="prepend" binding="strong">
      <string>sans-serif</string>
    </edit>
  </match>

  <!-- Default sans-serif fonts
       无衬字体不能更改，它是网页的备份选择 -->
  <match target="pattern">
    <test name="family">
      <string>sans-serif</string>
    </test>
    <edit name="family" mode="prepend" binding="strong">
      <string>LXGW WenKai</string>
      <string>Noto Sans CJK SC</string>
      <string>Noto Sans</string>
      <string>Twemoji</string>
    </edit>
  </match>

  <!-- Default serif fonts -->
  <match target="pattern">
    <test name="family">
      <string>serif</string>
    </test>
    <edit name="family" mode="prepend" binding="strong">
      <!-- 霞骛文楷 如果需要异形字，需要将下面替换中的 Noto Serif CJK SC 改为 LXGW WenKai -->
      <string>LXGW WenKai</string>
      <!-- <string>Yozai</string> -->
      <!-- <string>WenQuanYi Zen Hei Sharp</string> -->
      <string>Noto Serif CJK SC</string>
      <string>Noto Serif</string>
      <string>Twemoji</string>
    </edit>
  </match>

  <!-- Default monospace fonts-->
  <match target="pattern">
    <test name="family">
      <string>monospace</string>
    </test>
    <edit name="family" mode="prepend" binding="strong">
      <string>LXGW WenKai</string>
      <string>Noto Sans Mono CJK SC</string>
      <string>Symbols Nerd Font</string>
      <string>Twemoji</string>
    </edit>
  </match>

  <!-- 除了程序名为 chrome 的情况下，优先使用 JetBrainsMono Nerd Font
       显示西文，再用 Noto Mono CJK 显示中文。-->
  <match target="pattern">
    <test name="prgname" compare="not_eq">
      <string>chrome</string>
    </test>
    <test name="family" compare="contains">
      <string>LXGW WenKai</string>
      <!-- <string>Noto Sans Mono CJK</string> -->
    </test>
    <edit name="family" mode="prepend" binding="strong">
      <string>Ubuntu Mono</string>
      <!-- <string>JetBrainsMono Nerd Font</string> -->
    </edit>
  </match>

  <!-- en ↑ 对于 LXGW WenKai 和 Ubuntu Mono 来说，已经替换了 -->
  <match target="pattern">
    <test name="lang" compare="contains">
      <string>en</string>
    </test>
    <test name="family" compare="contains">
      <string>LXGW WenKai</string>
      <!-- <string>Noto Sans CJK</string> -->
    </test>
    <edit name="family" mode="prepend" binding="strong">
      <string>Ubuntu Mono</string>
      <!-- <string>Noto Sans</string> -->
    </edit>
  </match>

  <match target="pattern">
    <test name="lang" compare="contains">
      <string>en</string>
    </test>
    <test name="family" compare="contains">
      <string>LXGW WenKai</string>
      <!-- <string>Noto Serif CJK</string> -->
    </test>
    <edit name="family" mode="prepend" binding="strong">
      <string>Ubuntu Mono</string>
      <!-- <string>Noto Serif</string> -->
    </edit>
  </match>
  
  <!-- Replace monospace fonts
       pacman -Qqo /usr/share/fonts Arch Linux 默认预装了两个字体：
       - 无衬线英文字体：Cantarell
       - 等宽英文字体：Source Code Pro -->
  <match target="pattern">
    <test name="family" compare="contains">
      <string>Source Code</string>
    </test>
    <edit name="family" binding="strong">
      <string>Ubuntu Mono</string>
    </edit>
  </match>

  <!-- 香港异形字 -->
  <match target="pattern">
    <test name="lang">
      <string>zh-HK</string>
    </test>
    <test name="family">
      <string>Noto Sans CJK SC</string>
    </test>
    <edit name="family" binding="strong">
      <string>Noto Sans CJK HK</string>
    </edit>
  </match>

  <match target="pattern">
    <test name="lang">
      <string>zh-HK</string>
    </test>
    <test name="family">
      <string>Noto Serif CJK SC</string>
    </test>
    <edit name="family" binding="strong">
      <!-- not have HK -->
      <string>Noto Serif CJK TC</string>
    </edit>
  </match>

  <match target="pattern">
    <test name="lang">
      <string>zh-HK</string>
    </test>
    <test name="family">
      <string>Noto Sans Mono CJK SC</string>
    </test>
    <edit name="family" binding="strong">
      <string>Noto Sans Mono CJK HK</string>
    </edit>
  </match>

  <!-- 台湾异形字 -->
  <match target="pattern">
    <test name="lang">
      <string>zh-TW</string>
    </test>
    <test name="family">
      <string>Noto Sans CJK SC</string>
    </test>
    <edit name="family" binding="strong">
      <string>Noto Sans CJK TC</string>
    </edit>
  </match>

  <match target="pattern">
    <test name="lang">
      <string>zh-TW</string>
    </test>
    <test name="family">
      <string>Noto Serif CJK SC</string>
    </test>
    <edit name="family" binding="strong">
      <string>Noto Serif CJK TC</string>
    </edit>
  </match>

  <match target="pattern">
    <test name="lang">
      <string>zh-TW</string>
    </test>
    <test name="family">
      <string>Noto Sans Mono CJK SC</string>
    </test>
    <edit name="family" binding="strong">
      <string>Noto Sans Mono CJK TC</string>
    </edit>
  </match>

  <!-- 日文异形字 -->
  <match target="pattern">
    <test name="lang">
      <string>ja</string>
    </test>
    <test name="family">
      <string>Noto Sans CJK SC</string>
    </test>
    <edit name="family" binding="strong">
      <string>Noto Sans CJK JP</string>
    </edit>
  </match>

  <match target="pattern">
    <test name="lang">
      <string>ja</string>
    </test>
    <test name="family">
      <string>Noto Serif CJK SC</string>
    </test>
    <edit name="family" binding="strong">
      <string>Noto Serif CJK JP</string>
    </edit>
  </match>

  <match target="pattern">
    <test name="lang">
      <string>ja</string>
    </test>
    <test name="family">
      <string>Noto Sans Mono CJK SC</string>
    </test>
    <edit name="family" binding="strong">
      <string>Noto Sans Mono CJK JP</string>
    </edit>
  </match>

  <!-- 韩文异形字 -->
  <match target="pattern">
    <test name="lang">
      <string>ko</string>
    </test>
    <test name="family">
      <string>Noto Sans CJK SC</string>
    </test>
    <edit name="family" binding="strong">
      <string>Noto Sans CJK KR</string>
    </edit>
  </match>

  <match target="pattern">
    <test name="lang">
      <string>ko</string>
    </test>
    <test name="family">
      <string>Noto Serif CJK SC</string>
    </test>
    <edit name="family" binding="strong">
      <string>Noto Serif CJK KR</string>
    </edit>
  </match>

  <match target="pattern">
    <test name="lang">
      <string>ko</string>
    </test>
    <test name="family">
      <string>Noto Sans Mono CJK SC</string>
    </test>
    <edit name="family" binding="strong">
      <string>Noto Sans Mono CJK KR</string>
    </edit>
  </match>
</fontconfig>

<!--
1. 用户自定义的字体配置，使用强绑定覆盖系统端配置
2. 让程序使用某个具体的字体，我并不想让我喜欢的编程字体 JetBransMono Nerd Font
   用在浏览器这些软件上

    - 无衬线：西文 Ubuntu Mono,Noto Sans，中文 LXGW WenKai,Noto Sans CJK
    - 衬线：西文 Ubuntu Mono,Noto Serif，中文 LXGW WenKai,Noto Serif CJK
    - 等宽：西文 Ubuntu Mono，中文 LXGW WenKai,Noto Sans Mono CJK
    - Emoji：ttf-twemoji
    - Nerd Font：ttf-nerd-fonts-symbols

    yay -S noto-fonts noto-fonts-cjk ttf-twemoji ttf-nerd-fonts-symbols

    - TODO 霞鹜文楷英文不好看

    # 不让程序使用某个具体的字体，而是使用通用字体族名（Generic Font Family）
    # ttf-iosevka-term
-->
